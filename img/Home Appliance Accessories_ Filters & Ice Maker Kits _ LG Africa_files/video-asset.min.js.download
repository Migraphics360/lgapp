var video;$(document).ready(function(){var l,e;"undefined"!=typeof ePrivacyCookies&&!ePrivacyCookies.get("LGCOM_IMPROVEMENTS")||((e=document.createElement("script")).src="https://www.youtube.com/iframe_api",$("body").append(e));var t=0<$(".navigation").length&&$(".navigation").data("close-video")?$(".navigation").data("close-video"):"Close Video";(video={originalFocus:null,cache:{$modal:null,id:null},markup:{modal:['<div class="video-modal video-box-closeset youtube"><div class="video-modal-background"></div><div class="modal-video-asset"><div class="video-asset">','<div class="video-modal video-box-closeset brightcove"><div class="video-modal-background"></div><div class="modal-video-asset"><div class="video-asset">','</div></div><button class="close-video">'+t+"</button></div>"],current:['<div class="video-asset video-box-closeset">','<button class="close-video">'+t+"</button></div>"]},getTitle:function(e,t){var a="",a="youtube"==e?t.getVideoData().title:t.mediainfo.name;return changeTitleFormat(a)},trigger:{init:function(){video.trigger.addEvent()},setYoutube:function(e){var t,a=xssfilter(e.getAttribute("data-src")),o=null;0<a.indexOf("/")&&(a=(t=a.split("/"))[t.length-1]);e.getAttribute("data-target");var i='<div id="videoPlayerCode"></div>';"modal"==e.getAttribute("data-target")?(o=video.markup.modal[0]+i+video.markup.modal[2],video.appendModal("youtube",o,a)):(o=video.markup.current[0]+i+video.markup.current[1],video.appendCurrent("youtube",o,a,"","",e)),this.playVideoYoutube(a)},setBrightcove:function(e){var t=xssfilter(e.getAttribute("data-video-id")),a=xssfilter(e.getAttribute("data-account")),o=xssfilter(e.getAttribute("data-player")),i=null,d='<div id="videoPlayerCode"></div>';"modal"==e.getAttribute("data-target")?(i=video.markup.modal[1]+d+video.markup.modal[2],video.appendModal("brightcove",i,t)):(i=video.markup.current[0]+d+video.markup.current[1],video.appendCurrent("brightcove",i,t,a,o,e)),this.playVideoBrightCove(a,o,t)},playVideoYoutube:function(e){0<=e.indexOf("?")&&(e=e.split("?")[0]),setTimeout(function(){var i=new YT.Player("videoPlayerCode",{height:"360",width:"640",videoId:e,host:"https://www.youtube.com",playerVars:{modestbranding:!0,rel:0},events:{onReady:function(e){e.target.playVideo()},onStateChange:function(e){e.data==YT.PlayerState.PLAYING&&adobeSatellite("video_track",{name:video.getTitle("youtube",i),event:"play"});e.data==YT.PlayerState.PAUSED&&adobeSatellite("video_track",{name:video.getTitle("youtube",i),event:"pause"})}}});var d=[0,0,0,0];l=setInterval(function(){if("function"!=typeof i.getDuration)return!1;for(var e=i.getDuration(),t=i.getCurrentTime(),a=parseInt(100*t/e),o=1;o<=4;o++)25*o<=a&&0==d[o-1]&&(d[o-1]=1,adobeSatellite("video_track",{name:video.getTitle("youtube",i),event:"ratio_"+25*o}));99<=a&&0==d[3]&&(d[3]=1,adobeSatellite("video_track",{name:video.getTitle("youtube",i),event:"ratio_100"}))},2e3)},1e3)},playVideoBrightCove:function(e,t,a){var d,o=e,n=t,r='<video-js id="brightCovePlayer" data-video-id="'+a+'"  data-account="'+o+'" data-player="'+n+'" data-embed="default" data-application-id autoplay class="video-js" controls></video-js>';setTimeout(function(){document.getElementById("videoPlayerCode").innerHTML=r;var e=document.createElement("script");e.src="https://players.brightcove.net/"+o+"/"+n+"_default/index.min.js",document.body.appendChild(e),e.onload=function(){(d=bc(document.getElementById("brightCovePlayer"))).on("loadedmetadata",function(){d.muted(!1),d.play()}),d.on("pause",function(){adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"pause"})}),d.on("play",function(){adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"play"})})};var i=[0,0,0,0];l=setInterval(function(){for(var e=d.mediainfo.duration,t=d.currentTime(),a=parseInt(100*t/e),o=1;o<=4;o++)25*o<=a&&0==i[o-1]&&(i[o-1]=1,adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"ratio_"+25*o}));99<=a&&0==i[3]&&(i[3]=1,adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"ratio_100"}))},2e3)},1e3)},addEvent:function(){var l=video.trigger,e=$(".component");e.length<=0&&(e=$(".container-fluid")),e.off("click.video").on({"click.video":function(e){e.preventDefault();var t,a,o,i,d,n,r,e=e.currentTarget;0<$("#videoPlayerCode").length&&(0<(t=$("#videoPlayerCode")).closest(".video-modal").length?t.closest(".video-modal").find("button.close-video"):$("#videoPlayerCode").siblings("button.close-video")).trigger("click"),$(".eprivacy-layer").remove(),"youtube"==e.getAttribute("data-type")?"undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_IMPROVEMENTS")?(0<$("#videoPlayerCode").length&&(0<(t=$("#videoPlayerCode")).closest(".video-modal").length?t.closest(".video-modal").find("button.close-video"):$("#videoPlayerCode").siblings("button.close-video")).trigger("click"),a=!0,video.originalFocus=$(e),"modal"!=e.getAttribute("data-target")&&(o=$(e).data("cachedvideo"),i=$(e).data("cacheid"),d=$(e).data("cacheaccount"),n=$(e).data("cacheplayer"),a=!o||(video.appendCurrent(e.getAttribute("data-type"),o,i,d,n,e,!0),"function"==typeof video.playVideoYoutube&&video.playVideoYoutube(i),!1)),a&&l.setYoutube(e),0<(r=$(e).closest(".slick-initialized")).length&&r.next().find("a.slide-pause.pause").trigger("click")):ePrivacyCookies.view("click"):(a=!0,video.originalFocus=$(e),"modal"!=e.getAttribute("data-target")&&(o=$(e).data("cachedvideo"),i=$(e).data("cacheid"),d=$(e).data("cacheaccount"),n=$(e).data("cacheplayer"),a=!o||(video.appendCurrent(e.getAttribute("data-type"),o,i,d,n,e,!0),"function"==typeof video.playVideoBrightCove&&video.playVideoBrightCove(d,n,i),!1)),a&&l.setBrightcove(e),0<(r=$(e).closest(".slick-initialized")).length&&r.next().find("a.slide-pause.pause").trigger("click"))}},".see-video")}},appendCurrent:function(e,t,a,o,i,d,n){var r=t,l=$(d).parents(".video-box"),t=(l=l.get(0)?l:$(d).parents(".video-box").find(".visual-area")).find(".video-asset"),c=$(d).parents(".carousel-box").find(".text-area");t&&t.remove(),c.animate({opacity:0},500),l.parents(".component").addClass("js-invisible-nav"),setTimeout(function(){c.css({zIndex:-1}),l.append(r),n||video.initCompo(d,a,o,i)},500)},appendModal:function(e,t,a){var o=document.querySelectorAll(".video-modal")[0],t=t;o&&$(o).remove(),$("body").addClass("modal-open").append(t),$("body").find(".video-modal").attr("tabindex",0).focus(),video.initModal(),video.cache.id=a},initCompo:function(a,o,i,d){$(".video-asset").on({click:function(e){e.preventDefault();var t=$(e.delegateTarget),e=$(e.delegateTarget).parents(".video-box").find(".text-area");t.parents(".component").removeClass("js-invisible-nav"),$(a).data("cachedvideo",t.detach()),$(a).data("cacheid",o),$(a).data("cacheaccount",i),$(a).data("cacheplayer",d),e.removeAttr("style")}},".close-video")},initModal:function(){function t(e){e=$(e.delegateTarget),video.cache.$modal=e.detach(),$("body").removeClass("modal-open"),video.originalFocus.focus(),l&&clearInterval(l)}var e=$(".video-modal");e.on({click:function(e){e.preventDefault(),t(e)}},".close-video"),e.on({"keydown.loopFocus":function(e){var t=$(this).find("a[href], area[href], input:not([disabled]), input:not([readonly]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").last();e.target===e.currentTarget?9===e.keyCode&&e.shiftKey&&(e.preventDefault(),t.focus()):0<=$(e.target).attr("class").indexOf("close-video")&&(9!==e.keyCode||e.shiftKey||(e.preventDefault(),$(e.currentTarget).focus()))},"keydown.closeModal":function(e){27===e.keyCode&&(e.preventDefault(),t(e))}}),e.on({click:function(e){e.preventDefault(),($(e.target).hasClass("video-modal")||$(e.target).hasClass("modal-video-asset")||$(e.target).hasClass("video-asset")||$(e.target).hasClass("video-modal-background"))&&t(e)}})},init:function(){video.trigger.init()}}).init()});
//# sourceMappingURL=maps/video-asset.min.js.map
